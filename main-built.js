define("object-task-celection",[],function(){function t(t){var s=this;this.lists=[],this.element=$("<dl></dl>"),this.img=$("<img>").attr("src","./img/close.png"),this.p=t,this.count="",this.span=$("<span></span>"),this.title=$("<dt></dt>").addClass("l-class").html(this.p),this.title.append(this.span),this.element.append(this.title),this.title.append(this.img),$("#class-list").after(this.element),this.show=!1,this.title.hover(function(){s.img.css("opacity",1)},function(){s.img.css("opacity",0)}),this.img.click(function(){s.element.remove(),s=null}),this.element.click(function(t){if(e.choosed?e.choosed.title.removeClass("l-chosed"):null,e.choosed=s,s.title.addClass("l-chosed"),"DT"==t.target.nodeName)if(s.show===!0){for(var o=0,i=s.lists.length;i>o;o++)s.lists[o].element.addClass("disappear");s.show=!1}else{s.show=!0;for(var o=0,i=s.lists.length;i>o;o++)s.lists[o].element.removeClass("disappear")}return!1})}var e={};return t.prototype.render=function(){$("#class-list").after(this.element)},t.prototype.add=function(t){this.lists.push(t)},{taskfile:t,until:e}}),define("object-task-list",["object-task-celection"],function(t){var e=t.until,s=function(t,s){var o=this;this.count=0,this.parent=s,this.todoLists={},this.title=t,this.span=$("<span></span>").text("("+this.count+")"),this.element=$("<dd></dd>").html(t),this.img=$("<img>").attr("src","./img/close.png"),this.element.append(this.span),this.element.append(this.img),this.element.click(function(){e.choosed_task?e.choosed_task.element.removeClass("t-chosed"):null,e.choosed_task=o,$(this).addClass("t-chosed"),o.render(),$(".c-title li:nth-child(1)").click()}),this.element.hover(function(t){o.img.css("opacity",1),t.stopPropagation()},function(t){o.img.css("opacity",0),t.stopPropagation()}),this.img.click(function(){o.element.remove(),o.dlDisappear(),o=null}),s.append(this.element)};return s.prototype.render=function(){this.dlDisappear();for(var t in this.todoLists)this.todoLists[t].dl.css("display","block")},s.prototype.renderTask=function(){this.parent.append(this.element)},s.prototype.Tocount=function(){for(var t in this.todoLists)this.count=this.todoLists[t].item.length;this.span.text("("+this.count+")")},s.prototype.dlDisappear=function(){$(".c-ele").css("display","none")},s.prototype.add=function(t){if(this.todoLists[t.date])this.todoLists[t.date].item.push(t),this.todoLists[t.date].dl.append(t.element),this.Tocount();else{this.todoLists[t.date]={},this.todoLists[t.date].item=[],this.todoLists[t.date].item.push(t),console.log(this.todoLists[t.date]);var e=$("<dl></dl>").addClass("c-ele");this.todoLists[t.date].dl=e;var s=$("<dt></dt>").addClass("t-title").text(t.date);this.todoLists[t.date].dl.append(s),this.todoLists[t.date].dl.append(t.element),$(".center").append(e),this.Tocount()}},{task:s}}),define("object-to-do-list",["object-task-celection"],function(t){var e=t.until,s=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},o=function(t){this.date=s(),this.title=t,this.element=$("<dd></dd>").html(this.title),this.done=!1;var o=this;this.content="",this.element.click(function(){e.choosed_todo?e.choosed_todo.element.removeClass("c-chosed"):null,e.choosed_todo=o,$(this).addClass("c-chosed"),o.render()})};return o.prototype.render=function(){$(".r-title h3").text(this.title),$(".r-timer time").text(this.date),$(".r-content p").text(this.content)},{todo:o}}),require.config({paths:{jquery:"http://libs.baidu.com/jquery/2.0.0/jquery.min"}}),require(["jquery","object-task-celection","object-task-list","object-to-do-list"],function(t,e,s,o){var i={taskFile:[],taskList:[],todo:[]},n=e.until;t("#class-list").click(function(){var t=prompt("请输入分类名称","no name"),s=null;null!=t&&""!=t&&(s=new e.taskfile(t),i.taskFile.push(s))}),t("#new-class").click(function(){var t=null;if(n.choosed){var e=prompt("请输入task名称","no name");null!=e&&""!=e&&(t=new s.task(e,n.choosed.element),i.taskList.push(t),n.choosed.add(t))}}),t(".to-do").click(function(){var t=null;if(n.choosed_task){var e=prompt("请输入todo名称","no name");null!=e&&""!=e&&(t=new o.todo(e),i.todo.push(t),n.choosed_task.add(t))}}),t(".img2").click(function(){n.choosed_todo&&(t(".right-masker").css("display","block"),t("#title").val(n.choosed_todo.title),t("#content").val(n.choosed_todo.content))}),t(".img1").click(function(){n.choosed_todo&&(n.choosed_todo.element.addClass("c-done"),n.choosed_todo.done=!0)}),t("#insure").click(function(){t(".right-masker").css("display","none"),n.choosed_todo.title=t("#title").val(),n.choosed_todo.content=t("#content").val(),n.choosed_todo.render(),n.choosed_todo.element.html(t("#title").val())}),t("#quit").click(function(){t(".right-masker").css("display","none")}),t(".c-title li:nth-child(1)").click(function(){var e=[];if(n.choosed_task){t(".c-title li").removeClass("intro"),t(this).addClass("intro");for(var s in n.choosed_task.todoLists){e=e.concat(n.choosed_task.todoLists[s].item);for(var o=0,i=e.length;i>o;o++)e[o].element.css("display","block")}}}),t(".c-title li:nth-child(2)").click(function(){var e=[];if(n.choosed_task){t(".c-title li").removeClass("intro"),t(this).addClass("intro");for(var s in n.choosed_task.todoLists){e=e.concat(n.choosed_task.todoLists[s].item);for(var o=0,i=e.length;i>o;o++)e[o].element.css("display","block"),e[o].done===!0&&e[o].element.css("display","none")}}}),t(".c-title li:nth-child(3)").click(function(){var e=[];if(n.choosed_task){t(".c-title li").removeClass("intro"),t(this).addClass("intro");for(var s in n.choosed_task.todoLists){e=e.concat(n.choosed_task.todoLists[s].item);for(var o=0,i=e.length;i>o;o++)e[o].element.css("display","block"),e[o].done===!1&&e[o].element.css("display","none")}}})}),define("main",function(){});